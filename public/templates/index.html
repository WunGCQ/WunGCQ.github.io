<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>OJ4Th</title>

    <!--加载重置样式-->
    <link rel="stylesheet" href="../stylesheets/reset.css"/>
    <!-- 加载主体layout样式-->
    <link rel="stylesheet" href="../stylesheets/layout.css"/>
    <!--加载header样式表-->
    <link rel="stylesheet" href="../stylesheets/header.css"/>
    <!--加载banner样式表-->
    <link rel="stylesheet" href="../stylesheets/banner.css"/>
    <!--交互动画-->
    <link rel="stylesheet" href="../stylesheets/animations.css"/>


    <!--smalljq-->
    <script src="../javascripts/lib/iPtdqx.js"></script>
    <!--cookie-->
    <script src="../javascripts/lib/cookie.js"></script>
    <!--跳转-->
    <script src="../javascripts/lib/jRouter.js"></script>
    <!--ajax-->
    <script src="../javascripts/lib/ajax.min.js"></script>
</head>
<body>
<div class="full-screen moving-show-animate">
    <div id="container">
        <header id="nav">
            <span onclick="window.open('/index/');">Online Judge 4th</span>
            <a class="nav-item" href="/index/">
                <span>主页</span>
                <i></i>
            </a><a class="nav-item" href="/problem/">
            <span>题目</span>
            <i></i>
        </a><a class="nav-item" href="/contest/">
            <span>比赛</span>
            <i></i>
        </a><a class="nav-item" href="/message/">
            <span>消息</span>
            <i></i>
        </a><a class="nav-item" href="/group/">
            <span>小组</span>
            <i></i>
        </a><a class="nav-item" id="search-bar" onmouseover="document.getElementById('search-nav').classList.add('show-menu-animate');">
                <span>搜索</span>
                <i></i>
            </a>
            <ul id="search-nav" class="sub-nav" onmouseleave="document.getElementById('search-nav').classList.remove('show-menu-animate');" onblur="document.getElementById('search-nav').classList.remove('show-menu-animate');">
                <li>
                    <a href="#">搜题目</a>
                </li>
                <li>
                    <a href="#">搜用户</a>
                </li>
                <li>
                    <a href="#">搜比赛</a>
                </li>
                <li>
                    <a href="#">搜小组</a>
                </li>
            </ul>

            <a class="nav-item unlog" id="user-bar" onmouseover="(function(){if(document.getElementById('user-bar').classList.contains('log')){document.getElementById('user-nav').classList.add('show-menu-animate');}})();">
                <span class="user-btn">我</span>
                <span class="login-btn">登录</span>
                <span class="register-btn">注册</span>
                <i></i>
            </a>

            <ul id="user-nav" class="sub-nav" onmouseleave="document.getElementById('user-nav').classList.remove('show-menu-animate');" onblur="document.getElementById('user-nav').classList.remove('show-menu-animate');">
                <li>
                    <a class="user-name" href="#">用户名</a>
                </li>
                <li>
                    <a href="#">用户设置</a>
                </li>
                <li>
                    <a href="#">登出</a>
                </li>
            </ul>
        </header>
        <div id="banner" class="banner">
            <a href="http://www.baidu.com" target="_blank">hehe</a>
        </div>
    </div>
</div>
<!--<h1>BUAA 在线评测系统</h1>-->
<script>
    window.onpopstate = window.onload = function(){
        //window.UI_animate = new UI_Animate();
        window.currentPagejRouter = jRouter();
        jRouter().setRouter('problem','get','/problem/',function(){
            var isGoToProblem= confirm('您确定要前往题目页吗');
            if(isGoToProblem) {
                jRouter('/problem/').redirect('current');
            }
        });
        jRouter().setRouter('group','get','/problem/',function(){alert('!!!');});
        currentPagejRouter.initWindow(function(){setActiveLink();});
        currentPagejRouter.setInitDomFunction(function(){
            setActiveLink();
        });
        currentPagejRouter.parseAnchor();
        //currentPagejRouter.init();
        currentPagejRouter.loadTemplate();
        currentPagejRouter.loadModelData();
        initUserModel();
        //user.bindHeaderBar();


    };

    function setActiveLink() {
        var href = window.location.href;
        var navLinkArray = ['index','problem','contest','message','group'];
        var titleArray = ['主页','题目','比赛','消息','小组'];
        $('#nav a').removeClass('active-link');
        for(var i =0; i<navLinkArray.length; i++) {
            if(window.location.href.split('.html')[0].split('/').indexOf(navLinkArray[i])!=-1) {
                document.getElementById('nav').getElementsByTagName('a')[i].classList.add('active-link');
                document.title = 'OJ4th:'+titleArray[i];
                return;
            }
        }
    }
    //初始化用户
    window.initUserModel = function(){
        window.user = new UserModel();
        //if(document.readystate == "loaded") user.bindHeaderBar();
        user.login();

    };


</script>

<script src="../javascripts/Models/UserModel.js"></script>
<!--jq-->
<script src="../javascripts/lib/jquery-1.10.0.js"></script>
</body>
</html>